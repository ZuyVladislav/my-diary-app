<script>
  const CLIENT_ID = "e52fce785062421ea39ccb701f91567";
  const REDIRECT_URI = "https://zuyvladislav.github.io/my-diary-app/callback.html";

  function randomState() {
    return crypto.getRandomValues(new Uint32Array(4)).join("-");
  }

  document.getElementById("login").onclick = () => {
    const state = randomState();
    localStorage.setItem("yandex_oauth_state", state);

    const url = new URL("https://oauth.yandex.ru/authorize");
    url.searchParams.set("response_type", "code");
    url.searchParams.set("client_id", CLIENT_ID);
    url.searchParams.set("redirect_uri", REDIRECT_URI);
    url.searchParams.set("state", state);

    window.location.href = url.toString();
  };
</script>
